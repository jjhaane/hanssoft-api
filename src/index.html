<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="APIs for various functionalities including downloaders, AI tools, image creators, and more.">
    <meta name="theme-color" content="#1a1a1a">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://api.hanssoft.web.id">
    <meta property="og:title" content="Hanssoft API">
    <meta property="og:description" content="Comprehensive API collection for various web functionalities.">
    <meta property="og:site_name" content="Hanssoft API">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://skyzopedia-api.web.id">
    <meta name="twitter:title" content="Hanssoft API">
    <meta name="twitter:description" content="Comprehensive API collection for various web functionalities.">
    <meta name="twitter:creator" content="@skyzopedia">
    
    <meta name="author" content="Skyzopedia Team">
    <meta name="keywords" content="API, endpoints, documentation, Skyzopedia, REST API">
    <link rel="canonical" href="https://skyzopedia-api.web.id">
    
    <title>Hanssoft API</title>
    <link rel="icon" href="/icon.jpg" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['Ubuntu Mono', 'monospace'],
                        'sans': ['DM Sans', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            display: none !important;
        }
        
        body {
            position: relative;
            background-color: #181818;
            letter-spacing: -0.4px;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            min-height: 100vh;
            z-index: -1;
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none;
        }
        
        /* Category scroll container */
        .category-scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 10px;
        }
                
        
        
        /* Status badges */
        .status-badge {
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .status-ready {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .status-update {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .status-error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        /* Content type badge */
        .content-type-badge {
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 4px;
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        /* Response media container */
        .response-media-container {
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .response-media-container img,
        .response-media-container video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 6px;
        }
        
        .response-media-container audio {
            width: 100%;
            max-width: 400px;
        }
        
        /* Code block */
        .code-block {
            font-family: 'Ubuntu Mono', monospace;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow-x: auto;
        }
        
        /* Slide animations */
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .slide-down {
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-width: 350px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Loading screen */
        .loader {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            position: relative;
            animation: rotate 1s linear infinite;
        }
        
        .loader::before {
            content: "";
            box-sizing: border-box;
            position: absolute;
            inset: 0px;
            border-radius: 50%;
            border: 4px solid #3b82f6;
            animation: prixClipFix 2s linear infinite;
        }
        
        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }
        
        @keyframes prixClipFix {
            0%   { clip-path: polygon(50% 50%,0 0,0 0,0 0,0 0,0 0); }
            25%  { clip-path: polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0); }
            50%  { clip-path: polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%); }
            75%  { clip-path: polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%); }
            100% { clip-path: polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0); }
        }
        
        /* Line clamp */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
        }
        
        .stat-card {
            min-width: 160px;
        }
        
        @media (max-width: 768px) {
            .stat-card {
                min-width: 140px;
            }
        }
    </style>
</head>
<body class="bg-[#181818] text-gray-200 antialiased font-sans min-h-screen">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center justify-center z-50">
        <div class="text-center mb-8">
            <div class="loader mx-auto mb-6"></div>
            <p class="text-slate-400">Loading documentation...</p>
        </div>
    </div>
    
    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-4 slide-up">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center">
                            <i class="fas fa-code text-white text-lg"></i>
                        </div>
                        <div>
                            <h1 id="titleApi" class="text-2xl md:text-4xl font-bold text-white">Hanssoft API</h1>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="px-3 py-1 bg-slate-800 text-slate-300 text-xs font-semibold rounded-full">v1.0.0-x</span>
                                <span class="text-slate-400 text-sm">•</span>
                                <span class="text-slate-400 text-sm">Interactive API Documentation</span>
                            </div>
                        </div>
                    </div>
                    <p id="descApi" class="text-slate-300 max-w-3xl text-sm">
                        A comprehensive REST API built with Express.js, providing easy access to various web functionalities including downloaders, AI tools, image creators, and more.
                    </p>
                </div>
                
                <!-- Stats Cards -->
                <div class="w-full md:w-auto">
                    <div class="stats-grid">
                        <div class="stat-card bg-[#212121] border border-[#2E2E2E] rounded-xl p-2">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center">
                                    <i class="fas fa-code text-blue-400"></i>
                                </div>
                                <div>
                                    <div id="totalEndpoints" class="text-xl font-bold text-white counter">0</div>
                                    <div class="text-slate-400 text-xs">Endpoints</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-[#212121] border border-[#2E2E2E] rounded-xl p-2">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center">
                                    <i class="fas fa-layer-group text-purple-400"></i>
                                </div>
                                <div>
                                    <div id="totalCategories" class="text-xl font-bold text-white counter">0</div>
                                    <div class="text-slate-400 text-xs">Categories</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-[#212121] border border-[#2E2E2E] rounded-xl p-2">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center">
                                    <i class="fas fa-check-circle text-emerald-400"></i>
                                </div>
                                <div>
                                    <div id="statusReady" class="text-xl font-bold text-white">100%</div>
                                    <div class="text-slate-400 text-xs">Status Ready</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-[#212121] border border-[#2E2E2E] rounded-xl p-2">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-10 h-10 rounded-lg bg-cyan-500/20 flex items-center justify-center">
                                    <i class="fas fa-clock text-cyan-400"></i>
                                </div>
                                <div>
                                    <div id="serverTime" class="text-xl font-bold text-white">00:00:00</div>
                                    <div class="text-slate-400 text-xs">Server Time</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Horizontal Category Filter -->
            <div class="mb-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-sm font-semibold text-slate-300">Filter by Category</h3>
                    <div class="flex items-center gap-2">
                        <button id="scrollLeft" class="w-8 h-8 rounded-full bg-[#212121] border border-[#2E2E2E] flex items-center justify-center text-slate-400 hover:text-white">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button id="scrollRight" class="w-8 h-8 rounded-full bg-[#212121] border border-[#2E2E2E] flex items-center justify-center text-slate-400 hover:text-white">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="category-scroll-container" id="categoryScroll">
                    <!-- Category filters will be dynamically added here -->
                </div>
            </div>
            
            <!-- Terminal Search Bar -->
            <div class="w-full border border-[#2E2E2E] overflow-hidden rounded-lg">
                <div class="border-b border-[#2E2E2E] bg-[#1a1a1a]">
                    <div class="flex items-center px-5 py-3 relative">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        </div>
                        <span class="text-xs text-gray-500 font-medium absolute left-1/2 -translate-x-1/2">terminal — bash — 120x40</span>
                    </div>
                </div>
                <div class="px-8 py-2 bg-[#212121]">
                    <div class="flex items-center gap-2 font-mono text-gray-400 text-sm font-semibold">
                        <span>
                            <span id="anuApi" class="text-green-500">skyzopedia@api</span>:<span class="text-blue-500">~</span>$ 
                        </span>
                        <div class="flex-1 relative">
                            <input 
                                type="text" 
                                id="searchInput" 
                                placeholder="search endpoints..." 
                                class="w-full font-mono text-sm py-1 bg-transparent text-white placeholder-gray-600 focus:outline-none border-none"
                                autocomplete="off"
                            >
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- API Content -->
        <section class="mb-16">
            <div id="content">
                <div id="noResults" class="text-center py-20 hidden">
                    <div class="max-w-md mx-auto">
                        <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-search text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">No results found</h3>
                        <p class="text-slate-400 mb-6">Try different keywords or check the spelling. You can also browse by category using the filters above.</p>
                        <button id="clearSearchBtn" class="px-5 py-2.5 bg-[#212121] border border-[#2E2E2E] rounded-lg text-white font-medium hover:bg-[#262626] transition-colors">
                            Clear search
                        </button>
                    </div>
                </div>

                <div id="apiList" class="space-y-4">
                    <!-- API list will be loaded here dynamically -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="pt-10 border-t border-[#2E2E2E]">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <div class="text-center md:text-left">
                
                <div class="flex flex-col items-center md:items-end gap-4">
                    <div class="flex gap-6">
                        <a id="whatsappLink" target="_blank" class="group flex flex-col items-center">
                            <div class="w-12 h-12 rounded-full bg-green-900/20 border border-green-900/30 flex items-center justify-center mb-2 group-hover:bg-green-900/30 transition-colors">
                                <i class="fab fa-whatsapp text-green-400 text-xl"></i>
                            </div>
                            <span class="text-sm text-slate-300">Contact</span>
                        </a>
                        <a id="youtubeLink" target="_blank" class="group flex flex-col items-center">
                            <div class="w-12 h-12 rounded-full bg-red-900/20 border border-red-900/30 flex items-center justify-center mb-2 group-hover:bg-red-900/30 transition-colors">
                                <i class="fab fa-youtube text-red-400 text-xl"></i>
                            </div>
                            <span class="text-sm text-slate-300">YouTube</span>
                        </a>
                        <a id="githubLink" target="_blank" class="group flex flex-col items-center">
                            <div class="w-12 h-12 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center mb-2 group-hover:bg-slate-700 transition-colors">
                                <i class="fab fa-github text-white text-xl"></i>
                            </div>
                            <span class="text-sm text-slate-300">GitHub</span>
                        </a>
                    </div>
                    <p id="wm" class="text-slate-500 text-sm">© 2023 Hanssoft API. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </main>

    <!-- Back to Top Button -->
    <button id="backToTop" class="fixed bottom-8 right-8 w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white shadow-lg z-40 opacity-0 invisible transition-all duration-300 hover:scale-110">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- JavaScript -->
    <script>
        // Settings and data
        let settings = {};
        let allApiItems = [];
        let originalCategories = [];
        let activeCategoryFilter = 'all';
        
        // Category icons and colors
        const categoryIcons = {
            'Downloader': 'fas fa-download',
            'Imagecreator': 'fas fa-image',
            'Openai': 'fas fa-robot',
            'Random': 'fas fa-random',
            'Search': 'fas fa-search',
            'Stalker': 'fas fa-user-secret',
            'Tools': 'fas fa-tools',
            'Orderkuota': 'fas fa-sim-card',
            'AI Tools': 'fas fa-brain',
            'Entertainment': 'fas fa-gamepad',
            'Utilities': 'fas fa-cogs',
            'Social Media': 'fas fa-share-alt',
            'Canvas': 'fas fa-paint-brush'
        };
        
        const categoryColors = {
            'Downloader': 'bg-blue-500/20 text-blue-400',
            'Imagecreator': 'bg-purple-500/20 text-purple-400',
            'Openai': 'bg-emerald-500/20 text-emerald-400',
            'Random': 'bg-amber-500/20 text-amber-400',
            'Search': 'bg-cyan-500/20 text-cyan-400',
            'Stalker': 'bg-red-500/20 text-red-400',
            'Tools': 'bg-slate-500/20 text-slate-400',
            'Orderkuota': 'bg-green-500/20 text-green-400',
            'AI Tools': 'bg-indigo-500/20 text-indigo-400',
            'Entertainment': 'bg-pink-500/20 text-pink-400',
            'Utilities': 'bg-orange-500/20 text-orange-400',
            'Social Media': 'bg-teal-500/20 text-teal-400',
            'Canvas': 'bg-blue-500/20 text-blue-400'
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // Main initialization function
        async function initializeApp() {
            try {
                
                // Load settings and data
                settings = await loadSettings();
                setupUI();
                await loadAPIData();
                setupEventListeners();
                
                // Start server time update
                updateServerTime();
                setInterval(updateServerTime, 1000);
                
                // Hide loading screen with delay
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loadingScreen');
                    if (loadingScreen) {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                        }, 500);
                    }
                }, 1200);
                
            } catch (error) {
                console.error('Initialization error:', error);
                showErrorMessage(error);
            }
        }

        // Load settings from server
        async function loadSettings() {
            try {
                // PRODUCTION MODE: Load settings from API
                const baseUrl = window.location.origin + "/settings";
                const response = await fetch(baseUrl);
                if (!response.ok) throw new Error('Settings not found');
                const data = await response.json();
                console.log('Settings loaded from API:', data);
                return data;
            } catch (error) {
                console.warn('Using default settings:', error.message);
                return getDefaultSettings();
            }
        }

        // Load API data from server
        async function loadAPIData() {
            try {
                // PRODUCTION MODE: Load API data from settings endpoint
                if (!settings.categories || settings.categories.length === 0) {
                    console.log('No categories in settings, trying to load from API');
                    // If settings don't have categories, try to load them separately
                    const apiDataUrl = window.location.origin + "/api/data";
                    try {
                        const response = await fetch(apiDataUrl);
                        if (response.ok) {
                            const apiData = await response.json();
                            settings.categories = apiData.categories || [];
                        }
                    } catch (apiError) {
                        console.warn('Could not load API data:', apiError.message);
                    }
                }
                
                // If still no categories, use demo data
                if (!settings.categories || settings.categories.length === 0) {
                    console.log('No categories found, using demo data');
                    settings.categories = getDemoCategories();
                }
                
                // Save original data
                originalCategories = JSON.parse(JSON.stringify(settings.categories || []));
                console.log('Categories loaded:', originalCategories.length);
                
                // Extract all API items for search
                allApiItems = [];
                originalCategories.forEach(category => {
                    if (category && category.items) {
                        category.items.forEach(item => {
                            if (item) {
                                allApiItems.push({
                                    ...item,
                                    category: category.name
                                });
                            }
                        });
                    }
                });
                
                // Render initial data
                renderAPIData(originalCategories);
                
                // Initialize horizontal category filters
                initializeCategoryFilters();
                
                // Update stats
                updateStats();
                
            } catch (error) {
                console.error('Error loading API data:', error);
                renderAPIData([]);
            }
        }

        // Demo categories
        function getDemoCategories() {
            return [
                {
                    name: "Downloader",
                    items: [
                        { 
                            name: "YouTube Downloader", 
                            method: "GET", 
                            path: "/api/download/youtube?url=", 
                            desc: "Download videos from YouTube in various formats and qualities" 
                        },
                        { 
                            name: "Instagram Downloader", 
                            method: "GET", 
                            path: "/api/download/instagram?url=", 
                            desc: "Download photos and videos from Instagram" 
                        }
                    ]
                },
                {
                    name: "AI Tools",
                    items: [
                        { 
                            name: "ChatGPT", 
                            method: "GET", 
                            path: "/api/ai/chatgpt?prompt=", 
                            desc: "AI-powered chatbot using OpenAI's GPT technology" 
                        },
                        { 
                            name: "Image Generator", 
                            method: "GET", 
                            path: "/api/ai/image?prompt=", 
                            desc: "Generate images from text descriptions using AI" 
                        }
                    ]
                },
                {
                    name: "Search",
                    items: [
                        { 
                            name: "Google Search", 
                            method: "GET", 
                            path: "/api/search/google?query=", 
                            desc: "Search the web using Google" 
                        },
                        { 
                            name: "Image Search", 
                            method: "GET", 
                            path: "/api/search/images?query=", 
                            desc: "Search for images across the web" 
                        }
                    ]
                },
                {
                    name: "Canvas",
                    items: [
                        { 
                            name: "Image Editor", 
                            method: "GET", 
                            path: "/api/canvas/edit?image=", 
                            desc: "Basic image editing tools" 
                        },
                        { 
                            name: "Text Overlay", 
                            method: "GET", 
                            path: "/api/canvas/text?image=&text=", 
                            desc: "Add text overlay to images" 
                        }
                    ]
                }
            ];
        }

        // Default settings fallback
        function getDefaultSettings() {
            return {
                name: "Hanssoft API",
                creator: "Jayhaan",
                description: "Interactive API documentation with real-time testing",
                categories: [],
                theme: "dark",
                linkWhatsapp: "https://wa.me/6285141067887",
                linkYoutube: "http://www.youtube.com/@hanssoftt",
                linkGithub: "https://github.com/jjhaane"
            };
        }

        // Setup UI elements
        function setupUI() {
            const titleApi = document.querySelectorAll("#titleApi");
            
            // Update title
            if (titleApi) titleApi.forEach(el => {
                el.textContent = settings.name
            });
            
            const descApi = document.querySelectorAll("#descApi");
            
            // Update title
            if (descApi) descApi.forEach(el => {
                el.textContent = settings.description
            });
            
            const wmApi = document.querySelectorAll("#wm");
            
            // Update title
            if (wmApi) wmApi.forEach(el => {
                el.textContent = `© 2023 ${settings.creator}. All rights reserved.`
            });            
            
            const anuApi = document.querySelectorAll("#anuApi");
            
            // Update title
            if (anuApi) anuApi.forEach(el => {
                el.textContent = `root@${settings.creator}`
            });            
            
            // Update footer links
            const whatsappLink = document.getElementById('whatsappLink');
            const youtubeLink = document.getElementById('youtubeLink');
            const githubLink = document.getElementById('githubLink');
            
            if (whatsappLink) whatsappLink.href = settings.linkWhatsapp || '#';
            if (youtubeLink) youtubeLink.href = settings.linkYoutube || '#';
            if (githubLink) githubLink.href = settings.linkGithub || '#';
        }

        // Update server time display
        function updateServerTime() {
            const serverTimeElement = document.getElementById('serverTime');
            if (!serverTimeElement) return;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            serverTimeElement.textContent = timeString;
        }

        // Initialize horizontal category filters
        function initializeCategoryFilters() {
            const categoryScroll = document.getElementById('categoryScroll');
            if (!categoryScroll) return;
            
            // Add "All" filter
            categoryScroll.innerHTML = `
                <button class="category-filter active shrink-0 px-2 py-2 rounded-xl bg-gradient-to-r text-sm from-blue-500 to-purple-500 text-white font-medium transition-all duration-300 flex items-center gap-2" data-category="all">
                    <i class="fas fa-layer-group"></i>
                    <span>All Endpoints</span>
                </button>
            `;
            
            // Add category filters
            originalCategories.forEach(category => {
                if (!category || !category.name) return;
                
                const colorClass = categoryColors[category.name] || 'bg-slate-700/30 text-slate-300';
                const icon = categoryIcons[category.name] || 'fas fa-folder';
                
                categoryScroll.innerHTML += `
                    <button class="category-filter shrink-0 px-2 py-2 rounded-xl bg-[#212121] border border-[#2E2E2E] text-white font-medium transition-all duration-300 flex items-center gap-2 text-sm hover:bg-[#262626]" data-category="${category.name.toLowerCase()}">
                        <i class="${icon}"></i>
                        <span>${category.name}</span>
                        <span class="text-xs bg-slate-800/50 px-2 py-1 rounded-full">${category.items?.length || 0}</span>
                    </button>
                `;
            });
            
            // Add event listeners to category filters
            document.querySelectorAll('.category-filter').forEach(filter => {
                filter.addEventListener('click', function() {
                    const category = this.dataset.category;
                    
                    // Update active state
                    document.querySelectorAll('.category-filter').forEach(f => {
                        f.classList.remove('active', 'bg-gradient-to-r', 'from-blue-500', 'to-purple-500');
                        f.classList.add('bg-[#212121]', 'border', 'border-[#2E2E2E]');
                    });
                    this.classList.add('active', 'bg-gradient-to-r', 'from-blue-500', 'to-purple-500');
                    this.classList.remove('bg-[#212121]', 'border', 'border-[#2E2E2E]');
                    
                    // Apply filter
                    activeCategoryFilter = category;
                    applyCategoryFilter(category);
                });
            });
        }

        // Apply category filter
        function applyCategoryFilter(category) {
            if (category === 'all') {
                renderAPIData(originalCategories);
            } else {
                const filteredCategories = originalCategories.filter(cat => 
                    cat.name.toLowerCase() === category.toLowerCase()
                );
                renderAPIData(filteredCategories);
            }
            
            // Update search results count
            updateSearchResultsCount();
        }

        // Update stats
        function updateStats() {
            const totalEndpoints = document.getElementById('totalEndpoints');
            const totalCategories = document.getElementById('totalCategories');
            const statusReady = document.getElementById('statusReady');
            
            if (!totalEndpoints || !totalCategories || !statusReady) return;
            
            let endpointCount = 0;
            let categoryCount = originalCategories.length;
            
            originalCategories.forEach(category => {
                endpointCount += (category.items || []).length;
            });
            
            // Animate counters
            animateCounter(totalEndpoints, endpointCount);
            animateCounter(totalCategories, categoryCount);
            
            // Always show 100% ready for now
            statusReady.textContent = '100%';
        }

        // Animate counter
        function animateCounter(element, target) {
            let current = 0;
            const increment = target / 30;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current);
            }, 50);
        }

        // Render API data
        function renderAPIData(categories) {
            const apiList = document.getElementById('apiList');
            if (!apiList) {
                console.error('apiList element not found!');
                return;
            }
            
            // Clear existing content
            apiList.innerHTML = '';
            
            if (!categories || categories.length === 0) {
                apiList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-code text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">No API endpoints available</h3>
                        <p class="text-slate-400">Check back later or contact the administrator.</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            categories.forEach((category, catIndex) => {
                if (!category || !category.items || category.items.length === 0) return;
                
                category.items.forEach((item, endpointIndex) => {
                    if (!item) return;
                    
                    const method = "GET"; // Only GET method
                    const pathParts = (item.path || '').split('?');
                    const path = pathParts[0] || '';
                    const itemName = item.name || 'Unnamed Endpoint';
                    const itemDesc = item.desc || 'No description available';
                    
                    // Build initial URL
                    let initialUrl = window.location.origin + (item.path || '');
                    
                    // If there's a query string, ensure all parameters are present with empty values
                    if (item.path && item.path.includes('?')) {
                        const [base, query] = item.path.split('?');
                        if (query) {
                            const params = new URLSearchParams(query);
                            for (const [key] of params) {
                                params.set(key, '');
                            }
                            initialUrl = window.location.origin + base + '?' + params.toString();
                        }
                    }
                    
                    html += `
                    <div class="api-item bg-[#212121] border border-[#2E2E2E] rounded-lg overflow-hidden fade-in" 
                         data-method="${method.toLowerCase()}"
                         data-path="${path}"
                         data-alias="${itemName}"
                         data-description="${itemDesc}"
                         data-category="${(category.name || '').toLowerCase()}">
                        
                        <button onclick="toggleEndpoint(${catIndex}, ${endpointIndex})" class="w-full text-left">
                            <div class="px-6 py-5 bg-[#212121]">
                                <div class="flex items-start gap-4">
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between gap-3">
                                            <h3 class="flex items-center gap-3 font-medium text-md text-white" title="${itemName}">
                                                <span class="material-icons transition-transform duration-200 text-white text-xl" id="endpoint-icon-${catIndex}-${endpointIndex}">expand_more</span>
                                                <span>${itemName}</span>
                                            </h3>
                                            <div class="flex items-center gap-2">
                                                <span class="text-xs px-2 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-md">
                                                    ${method}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-2">
                                            <div class="flex-1 min-w-0 flex items-center gap-2 flex-wrap">
                                                <span class="text-xs px-2 py-0.5 bg-[#2a2a2a] text-gray-400 border border-[#3a3a3a] rounded-md">
                                                    # ${category.name}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </button>
                        
                        <div id="endpoint-${catIndex}-${endpointIndex}" class="hidden">
                            <div class="bg-[#1a1a1a] p-5 border-t border-[#2E2E2E]">
                                <div>
                                    <div class="mb-4">
                                        <p class="text-slate-300 text-sm">${itemDesc}</p>
                                    </div>
                                    
                                    <form id="form-${catIndex}-${endpointIndex}">
                                        <div class="mb-4 space-y-3" id="params-container-${catIndex}-${endpointIndex}">
                                            <!-- Parameters will be inserted here -->
                                        </div>
                                        
                                        <div class="mb-6">
                                            <label class="block text-slate-300 text-sm font-medium mb-2">Request URL</label>
                                            <div class="flex gap-2">
                                                <div class="flex-1 code-block px-4 py-3">
                                                    <code class="text-sm text-white font-mono truncate" id="url-display-${catIndex}-${endpointIndex}">${initialUrl}</code>
                                                </div>
                                                <button type="button" onclick="copyUrl(${catIndex}, ${endpointIndex})" 
                                                        class="bg-[#212121] border border-[#2E2E2E] hover:bg-[#262626] text-white px-4 py-3 text-sm font-medium transition-colors rounded-md">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div class="flex gap-3">
                                            <button type="button" onclick="executeRequest(event, ${catIndex}, ${endpointIndex}, '${method}', '${path}')" 
                                                    class="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium py-3 px-5 rounded-lg flex items-center justify-center gap-2 hover:opacity-90 transition-all">
                                                <i class="fas fa-play"></i>
                                                Execute Request
                                            </button>
                                            <button type="button" onclick="clearResponse(${catIndex}, ${endpointIndex})" 
                                                    class="bg-[#212121] border border-[#2E2E2E] text-white font-medium py-3 px-5 rounded-lg flex items-center justify-center gap-2 hover:bg-[#262626] transition-colors">
                                                <i class="fas fa-redo"></i>
                                            </button>
                                        </div>
                                    </form>
                                    
                                    <div id="response-${catIndex}-${endpointIndex}" class="mt-6 hidden">
                                        <div class="flex justify-between items-center mb-3">
                                            <div class="flex items-center gap-3">
                                                <h4 class="font-bold text-white">Response</h4>
                                                <span class="content-type-badge" id="content-type-${catIndex}-${endpointIndex}"></span>
                                            </div>
                                            <div class="flex items-center gap-3">
                                                <span class="text-xs text-slate-400" id="response-time-${catIndex}-${endpointIndex}"></span>
                                                <button onclick="copyResponse(${catIndex}, ${endpointIndex})" 
                                                        class="text-slate-400 hover:text-white transition-colors">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-[#1a1a1a] border border-[#2E2E2E] rounded-xl overflow-hidden">
                                            <div class="response-media-container p-4" id="response-content-${catIndex}-${endpointIndex}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>`;
                });
            });
            
            apiList.innerHTML = html;
            
            // Initialize parameters for each endpoint
            setTimeout(() => {
                if (categories && categories.length > 0) {
                    categories.forEach((category, catIndex) => {
                        if (category && category.items) {
                            category.items.forEach((item, endpointIndex) => {
                                if (item) {
                                    initializeEndpointParameters(catIndex, endpointIndex, item);
                                }
                            });
                        }
                    });
                }
            }, 200);
        }

        // Initialize endpoint parameters
        function initializeEndpointParameters(catIndex, endpointIndex, item) {
            const paramsContainer = document.getElementById(`params-container-${catIndex}-${endpointIndex}`);
            if (!paramsContainer) return;
            
            const params = extractParameters(item.path);
            
            if (params.length === 0) {
                paramsContainer.innerHTML = `
                    <div class="text-center py-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-check text-white"></i>
                        </div>
                        <p class="text-slate-400 text-sm">No parameters required</p>
                    </div>
                `;
                return;
            }
            
            let paramsHtml = '';
            params.forEach((param, index) => {
                paramsHtml += `
                <div>
                    <label class="block text-slate-400 text-xs mb-1">${param.name} <span class="text-slate-500">(${param.type})</span></label>
                    <input 
                        type="text" 
                        name="${param.name}" 
                        class="w-full px-3 py-2.5 border border-[#2E2E2E] text-sm focus:outline-none focus:border-[#444444] bg-[#1a1a1a] text-white placeholder:text-gray-500 rounded-md"
                        placeholder="Enter ${param.name}..."
                        id="param-${catIndex}-${endpointIndex}-${param.name}"
                        autocomplete="off"
                        value="${param.defaultValue || ''}"
                        oninput="updateRequestUrl(${catIndex}, ${endpointIndex})"
                    >
                </div>`;
            });
            
            paramsContainer.innerHTML = paramsHtml;
            
            // Update URL
            setTimeout(() => {
                updateRequestUrl(catIndex, endpointIndex);
            }, 50);
        }

        // Extract parameters from path
        function extractParameters(path) {
            const params = [];
            if (!path) return params;
            
            const queryString = path.split('?')[1];
            if (!queryString) return params;
            
            try {
                const urlParams = new URLSearchParams(queryString);
                for (const [key, value] of urlParams) {
                    params.push({
                        name: key,
                        required: false,
                        type: getParamType(key),
                        description: getParamDescription(key),
                        defaultValue: value
                    });
                }
            } catch (error) {
                console.error('Error parsing query string:', error);
            }
            
            return params;
        }

        // Get parameter type
        function getParamType(paramName) {
            const types = {
                'apikey': 'string',
                'url': 'string',
                'question': 'string',
                'query': 'string',
                'prompt': 'string',
                'format': 'string',
                'quality': 'string',
                'size': 'string',
                'limit': 'number',
                'text': 'string',
                'amount': 'number',
                'from': 'string',
                'to': 'string',
                'username': 'string',
                'count': 'number',
                'page': 'number',
                'id': 'string',
                'token': 'string'
            };
            return types[paramName] || 'string';
        }

        // Get parameter description
        function getParamDescription(paramName) {
            const descriptions = {
                'apikey': 'Your API key for authentication',
                'url': 'URL of the content to download/process',
                'question': 'Question or message to ask the AI',
                'query': 'Search query or keywords',
                'prompt': 'Text description for image generation',
                'format': 'Output format (mp4, mp3, jpg, png)',
                'quality': 'Video quality (360p, 720p, 1080p)',
                'size': 'Image dimensions (512x512, 1024x1024)',
                'limit': 'Number of results to return',
                'text': 'Text content to process',
                'amount': 'Amount to convert',
                'from': 'Source currency code',
                'to': 'Target currency code',
                'username': 'Username to lookup',
                'count': 'Number of items to return',
                'page': 'Page number for pagination',
                'id': 'Unique identifier',
                'token': 'Access token'
            };
            return descriptions[paramName] || 'Optional parameter';
        }

        // Setup event listeners
        function setupEventListeners() {
            const searchInput = document.getElementById('searchInput');
            const clearSearchBtn = document.getElementById('clearSearchBtn');
            const backToTopBtn = document.getElementById('backToTop');
            const scrollLeftBtn = document.getElementById('scrollLeft');
            const scrollRightBtn = document.getElementById('scrollRight');
            const categoryScroll = document.getElementById('categoryScroll');
            
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    handleSearch(this.value);
                });
            }
            
            if (clearSearchBtn) {
                clearSearchBtn.addEventListener('click', function() {
                    document.getElementById('searchInput').value = '';
                    handleSearch('');
                    showToast('Search cleared', 'info');
                });
            }
            
            if (backToTopBtn) {
                // Show/hide back to top button on scroll
                window.addEventListener('scroll', function() {
                    if (window.pageYOffset > 300) {
                        backToTopBtn.classList.remove('opacity-0', 'invisible');
                        backToTopBtn.classList.add('opacity-100', 'visible');
                    } else {
                        backToTopBtn.classList.remove('opacity-100', 'visible');
                        backToTopBtn.classList.add('opacity-0', 'invisible');
                    }
                });
                
                // Scroll to top when clicked
                backToTopBtn.addEventListener('click', function() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
            
            // Horizontal scroll buttons for categories
            if (scrollLeftBtn && categoryScroll) {
                scrollLeftBtn.addEventListener('click', function() {
                    categoryScroll.scrollBy({
                        left: -200,
                        behavior: 'smooth'
                    });
                });
            }
            
            if (scrollRightBtn && categoryScroll) {
                scrollRightBtn.addEventListener('click', function() {
                    categoryScroll.scrollBy({
                        left: 200,
                        behavior: 'smooth'
                    });
                });
            }
        }

        // Handle search
        function handleSearch(searchTerm) {
            const searchTermLower = (searchTerm || '').toLowerCase().trim();
            const noResults = document.getElementById('noResults');
            
            if (!searchTermLower) {
                // If no search term, show data based on active category filter
                if (activeCategoryFilter === 'all') {
                    renderAPIData(originalCategories);
                } else {
                    const filteredCategories = originalCategories.filter(category => 
                        category.name.toLowerCase() === activeCategoryFilter
                    );
                    renderAPIData(filteredCategories);
                }
                
                if (noResults) noResults.classList.add('hidden');
                updateSearchResultsCount();
                return;
            }
            
            // Filter data based on search term and active category
            let filteredData = [];
            
            if (activeCategoryFilter === 'all') {
                // Search across all categories
                filteredData = searchAcrossAllCategories(searchTermLower);
            } else {
                // Search only in active category
                const activeCategory = originalCategories.find(cat => 
                    cat.name.toLowerCase() === activeCategoryFilter
                );
                
                if (activeCategory) {
                    const filteredItems = activeCategory.items.filter(item => {
                        if (!item) return false;
                        
                        return (
                            (item.name || '').toLowerCase().includes(searchTermLower) ||
                            (item.desc || '').toLowerCase().includes(searchTermLower) ||
                            (item.path || '').toLowerCase().includes(searchTermLower) ||
                            (item.method || '').toLowerCase().includes(searchTermLower)
                        );
                    });
                    
                    if (filteredItems.length > 0) {
                        filteredData.push({
                            ...activeCategory,
                            items: filteredItems
                        });
                    }
                }
            }
            
            if (filteredData.length === 0) {
                const apiList = document.getElementById('apiList');
                if (apiList) apiList.innerHTML = '';
                if (noResults) {
                    noResults.classList.remove('hidden');
                }
            } else {
                renderAPIData(filteredData);
                if (noResults) noResults.classList.add('hidden');
            }
            
            updateSearchResultsCount(searchTermLower, filteredData);
        }

        // Search across all categories
        function searchAcrossAllCategories(searchTerm) {
            const filteredData = [];
            
            originalCategories.forEach(category => {
                if (!category || !category.items) return;
                
                const filteredItems = category.items.filter(item => {
                    if (!item) return false;
                    
                    return (
                        (item.name || '').toLowerCase().includes(searchTerm) ||
                        (item.desc || '').toLowerCase().includes(searchTerm) ||
                        (item.path || '').toLowerCase().includes(searchTerm) ||
                        (item.method || '').toLowerCase().includes(searchTerm) ||
                        (category.name || '').toLowerCase().includes(searchTerm)
                    );
                });
                
                if (filteredItems.length > 0) {
                    filteredData.push({
                        ...category,
                        items: filteredItems
                    });
                }
            });
            
            return filteredData;
        }

        // Update search results count
        function updateSearchResultsCount(searchTerm = '', filteredData = null) {
            const searchResultsCount = document.getElementById('searchResultsCount');
            const resultsCount = document.getElementById('resultsCount');
            
            if (!searchResultsCount || !resultsCount) return;
            
            if (!searchTerm) {
                searchResultsCount.classList.add('hidden');
                return;
            }
            
            let totalItems = 0;
            if (filteredData) {
                filteredData.forEach(category => {
                    totalItems += (category.items || []).length;
                });
            }
            
            resultsCount.textContent = totalItems;
            searchResultsCount.classList.remove('hidden');
        }

        // Toggle endpoint details
        function toggleEndpoint(catIndex, endpointIndex) {
            const endpoint = document.getElementById(`endpoint-${catIndex}-${endpointIndex}`);
            const icon = document.getElementById(`endpoint-icon-${catIndex}-${endpointIndex}`);
            
            if (endpoint && icon) {
                if (endpoint.classList.contains('hidden')) {
                    endpoint.classList.remove('hidden');
                    icon.style.transform = 'rotate(180deg)';
                    
                    // Scroll ke endpoint yang dibuka
                    setTimeout(() => {
                        endpoint.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                } else {
                    endpoint.classList.add('hidden');
                    icon.style.transform = 'rotate(0deg)';
                }
            }
        }

        // Update request URL
        function updateRequestUrl(catIndex, endpointIndex) {
            const form = document.getElementById(`form-${catIndex}-${endpointIndex}`);
            const urlDisplay = document.getElementById(`url-display-${catIndex}-${endpointIndex}`);
            
            if (!form || !urlDisplay) return { url: '', hasErrors: false };
            
            // Store base URL if not already stored
            if (!urlDisplay.dataset.baseUrl) {
                const full = urlDisplay.textContent.trim();
                const [base, query] = full.split('?');
                urlDisplay.dataset.baseUrl = base;
                urlDisplay.dataset.defaultQuery = query || '';
            }
            
            const baseUrl = urlDisplay.dataset.baseUrl;
            const params = new URLSearchParams(urlDisplay.dataset.defaultQuery);
            
            const inputs = form.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                const name = input.name;
                const value = input.value.trim();
                
                // Always add parameter to URL, even if empty
                params.set(name, value);
            });
            
            const finalUrl = baseUrl + (params.toString() ? '?' + params.toString() : '');
            urlDisplay.textContent = finalUrl;
            
            return { url: finalUrl, hasErrors: false };
        }

        // Execute API request - VERSI SIMPLE TAPI PASTI BEKERJA
        async function executeRequest(event, catIndex, endpointIndex, method, path) {
            event.preventDefault();
            
            const { url, hasErrors } = updateRequestUrl(catIndex, endpointIndex);
            
            const responseDiv = document.getElementById(`response-${catIndex}-${endpointIndex}`);
            const responseContent = document.getElementById(`response-content-${catIndex}-${endpointIndex}`);
            const responseTime = document.getElementById(`response-time-${catIndex}-${endpointIndex}`);
            const contentTypeBadge = document.getElementById(`content-type-${catIndex}-${endpointIndex}`);
            
            if (!responseDiv || !responseContent || !responseTime || !contentTypeBadge) {
                showToast('Error: Response elements not found', 'error');
                return;
            }
            
            // Tampilkan response container dengan SIMPLE
            responseDiv.classList.remove('hidden');
            responseDiv.style.display = 'block';
            
            // Tampilkan loading yang JELAS
            responseContent.innerHTML = `
                <div class="flex flex-col items-center justify-center py-12">
                    <div class="loader mb-6"></div>
                    <p class="text-slate-400">Sending request to API...</p>
                    <p class="text-slate-500 text-sm mt-2 truncate max-w-full">${url}</p>
                </div>
            `;
            
            responseTime.textContent = '';
            contentTypeBadge.textContent = '';
            
            const startTime = Date.now();
            
            try {
                console.log('API Request:', method, url);
                
                // Buat API call
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': '*/*',
                        'User-Agent': 'Hanssoft-API-Docs/1.0'
                    }
                });
                
                const responseTimeMs = Date.now() - startTime;
                responseTime.textContent = `${responseTimeMs}ms`;
                
                const contentType = response.headers.get('content-type') || '';
                contentTypeBadge.textContent = contentType.split(';')[0] || 'unknown';
                
                if (!response.ok) {
                    let errorMessage = `HTTP ${response.status}: ${response.statusText}`;
                    try {
                        const errorData = await response.text();
                        if (errorData) {
                            try {
                                const jsonError = JSON.parse(errorData);
                                errorMessage = jsonError.error || jsonError.message || errorMessage;
                            } catch {
                                if (errorData.length > 0) {
                                    errorMessage += ` - ${errorData.substring(0, 100)}`;
                                }
                            }
                        }
                    } catch (e) {
                        console.error('Error reading error response:', e);
                    }
                    throw new Error(errorMessage);
                }
                
                // Handle response berdasarkan content type
                if (contentType.includes('application/json')) {
                    const data = await response.json();
                    responseContent.innerHTML = `
                        <pre class="text-sm p-4 font-mono text-slate-300 overflow-auto max-h-96 bg-[#1a1a1a] rounded-lg">${JSON.stringify(data, null, 2)}</pre>
                    `;
                    
                } else if (contentType.includes('text/')) {
                    const text = await response.text();
                    // Coba parse sebagai JSON jika terlihat seperti JSON
                    if (text.trim().startsWith('{') || text.trim().startsWith('[')) {
                        try {
                            const jsonData = JSON.parse(text);
                            responseContent.innerHTML = `
                                <pre class="text-sm p-4 font-mono text-slate-300 overflow-auto max-h-96 bg-[#1a1a1a] rounded-lg">${JSON.stringify(jsonData, null, 2)}</pre>
                            `;
                        } catch {
                            responseContent.innerHTML = `
                                <pre class="text-sm p-4 font-mono text-slate-300 overflow-auto max-h-96 whitespace-pre-wrap break-words bg-[#1a1a1a] rounded-lg">${text}</pre>
                            `;
                        }
                    } else {
                        responseContent.innerHTML = `
                            <pre class="text-sm p-4 font-mono text-slate-300 overflow-auto max-h-96 whitespace-pre-wrap break-words bg-[#1a1a1a] rounded-lg">${text}</pre>
                        `;
                    }
                    
                } else if (contentType.includes('image/')) {
                    const blob = await response.blob();
                    const imageUrl = URL.createObjectURL(blob);
                    responseContent.innerHTML = `
                        <div class="p-4 flex flex-col items-center justify-center">
                            <img src="${imageUrl}" alt="Image Response" class="max-w-full max-h-96 object-contain rounded-lg shadow-lg mb-4" />
                            <div class="flex items-center gap-4 text-sm text-slate-400 flex-wrap justify-center">
                                <span><i class="fas fa-file-image mr-1"></i> ${contentType.split(';')[0]}</span>
                                <span><i class="fas fa-weight-hanging mr-1"></i> ${formatBytes(blob.size)}</span>
                                <a href="${imageUrl}" download="image" class="text-blue-400 hover:text-blue-300">
                                    <i class="fas fa-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                    `;
                    
                } else if (contentType.includes('audio/')) {
                    const blob = await response.blob();
                    const audioUrl = URL.createObjectURL(blob);
                    responseContent.innerHTML = `
                        <div class="p-6 flex flex-col items-center justify-center">
                            <div class="w-full max-w-md mb-4">
                                <audio controls class="w-full">
                                    <source src="${audioUrl}" type="${contentType}">
                                    Your browser does not support the audio element.
                                </audio>
                            </div>
                            <div class="flex items-center gap-4 text-sm text-slate-400 flex-wrap justify-center">
                                <span><i class="fas fa-file-audio mr-1"></i> ${contentType.split(';')[0]}</span>
                                <span><i class="fas fa-weight-hanging mr-1"></i> ${formatBytes(blob.size)}</span>
                                <a href="${audioUrl}" download="audio" class="text-blue-400 hover:text-blue-300">
                                    <i class="fas fa-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                    `;
                    
                } else if (contentType.includes('video/')) {
                    const blob = await response.blob();
                    const videoUrl = URL.createObjectURL(blob);
                    responseContent.innerHTML = `
                        <div class="p-4 flex flex-col items-center justify-center">
                            <div class="w-full max-w-xl mb-4">
                                <video controls class="w-full max-h-96 object-contain rounded-lg shadow-lg">
                                    <source src="${videoUrl}" type="${contentType}">
                                    Your browser does not support the video element.
                                </video>
                            </div>
                            <div class="flex items-center gap-4 text-sm text-slate-400 flex-wrap justify-center">
                                <span><i class="fas fa-file-video mr-1"></i> ${contentType.split(';')[0]}</span>
                                <span><i class="fas fa-weight-hanging mr-1"></i> ${formatBytes(blob.size)}</span>
                                <a href="${videoUrl}" download="video" class="text-blue-400 hover:text-blue-300">
                                    <i class="fas fa-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                    `;
                    
                } else {
                    // Fallback
                    try {
                        const text = await response.text();
                        responseContent.innerHTML = `
                            <pre class="text-sm p-4 font-mono text-slate-300 overflow-auto max-h-96 whitespace-pre-wrap break-words bg-[#1a1a1a] rounded-lg">${text}</pre>
                        `;
                        contentTypeBadge.textContent = 'text/plain (auto-detected)';
                    } catch (error) {
                        throw new Error(`Unsupported content type: ${contentType}`);
                    }
                }
                
                showToast('API request successful!', 'success');
                
            } catch (error) {
                console.error('API Request Error:', error);
                
                const errorMessage = error.message || 'Unknown error occurred';
                
                responseContent.innerHTML = `
                    <div class="text-center py-10 px-4">
                        <div class="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle text-red-400 text-2xl"></i>
                        </div>
                        <h4 class="font-bold text-white mb-2">API Request Failed</h4>
                        <p class="text-slate-400 text-sm">${escapeHtml(errorMessage)}</p>
                        <p class="text-slate-500 text-xs mt-2 truncate max-w-full">URL: ${url}</p>
                        <div class="mt-6">
                            <p class="text-xs text-slate-500 mb-1">Troubleshooting steps:</p>
                            <ul class="text-xs text-slate-500 text-left list-disc list-inside space-y-1">
                                <li>Check if the API endpoint is accessible</li>
                                <li>Verify the required parameters are filled</li>
                                <li>Check browser console for detailed errors</li>
                                <li>Make sure CORS is enabled on the server</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                responseTime.textContent = 'Error';
                contentTypeBadge.textContent = 'error';
                
                showToast(`API request failed: ${errorMessage.substring(0, 50)}...`, 'error');
            }
        }

        // Helper function to format bytes
        function formatBytes(bytes, decimals = 2) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const dm = decimals < 0 ? 0 : decimals;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
        }

        // Clear response
        function clearResponse(catIndex, endpointIndex) {
            const form = document.getElementById(`form-${catIndex}-${endpointIndex}`);
            const responseDiv = document.getElementById(`response-${catIndex}-${endpointIndex}`);
            
            if (!form || !responseDiv) return;
            
            // Clear inputs
            const inputs = form.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                input.value = '';
            });
            
            // Hide response
            responseDiv.classList.add('hidden');
            
            // Update URL
            updateRequestUrl(catIndex, endpointIndex);
            
            showToast('Form cleared', 'info');
        }

        // Copy URL to clipboard
        function copyUrl(catIndex, endpointIndex) {
            const urlDisplay = document.getElementById(`url-display-${catIndex}-${endpointIndex}`);
            if (!urlDisplay) return;
            
            const url = urlDisplay.textContent.trim();
            
            navigator.clipboard.writeText(url).then(() => {
                showToast('URL copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Failed to copy URL:', err);
                showToast('Failed to copy URL', 'error');
            });
        }

        // Copy response to clipboard
        function copyResponse(catIndex, endpointIndex) {
            const responseContent = document.getElementById(`response-content-${catIndex}-${endpointIndex}`);
            if (!responseContent) return;
            
            const text = responseContent.textContent || responseContent.innerText;
            
            navigator.clipboard.writeText(text).then(() => {
                showToast('Response copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Failed to copy response:', err);
                showToast('Failed to copy response', 'error');
            });
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            if (!toastContainer) return;
            
            const toastId = 'toast-' + Date.now();
            const icon = {
                'success': 'fas fa-check-circle',
                'error': 'fas fa-exclamation-circle',
                'info': 'fas fa-info-circle',
                'warning': 'fas fa-exclamation-triangle'
            }[type] || 'fas fa-info-circle';
            
            const colorClass = {
                'success': 'text-green-400',
                'error': 'text-red-400',
                'info': 'text-blue-400',
                'warning': 'text-yellow-400'
            }[type] || 'text-blue-400';
            
            const toast = document.createElement('div');
            toast.id = toastId;
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="flex items-center gap-3">
                    <i class="${icon} ${colorClass} text-lg"></i>
                    <div>
                        <p class="text-white font-medium">${message}</p>
                    </div>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            
            // Show toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Remove toast after 4 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 500);
            }, 4000);
        }

        // Escape HTML
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Show error message
        function showErrorMessage(err = undefined) {
            const loadingScreen = document.getElementById('loadingScreen');
            if (!loadingScreen) return;
            
            loadingScreen.innerHTML = `
                <div class="text-center p-8">
                    <div class="w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-exclamation-triangle text-red-400 text-2xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-4">Connection Error</h2>
                    <p class="text-slate-300 mb-6">${err ? err : "Unable to load API documentation. Please check your connection."}</p>
                    <div class="flex gap-3 justify-center">
                        <button onclick="location.reload()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium py-3 px-6 rounded-lg">
                            <i class="fas fa-redo mr-2"></i> Try Again
                        </button>
                        <button onclick="loadOfflineMode()" class="bg-[#212121] border border-[#2E2E2E] text-white font-medium py-3 px-6 rounded-lg">
                            <i class="fas fa-wifi-slash mr-2"></i> Offline Mode
                        </button>
                    </div>
                </div>
            `;
            
            // Reset settings
            settings = getDefaultSettings();
            setupUI();
            
            setTimeout(() => {
                loadingScreen.style.opacity = '0.9';
            }, 500);
        }

        // Load offline mode
        function loadOfflineMode() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (!loadingScreen) return;
            
            loadingScreen.innerHTML = `
                <div class="text-center p-8">
                    <div class="w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-wifi-slash text-yellow-400 text-2xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-4">Offline Mode</h2>
                    <p class="text-slate-300 mb-6">Using offline documentation. API testing will not work.</p>
                    <p class="text-slate-400 text-sm mb-6">Reconnect to the internet to access live API endpoints.</p>
                    <button onclick="location.reload()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium py-3 px-6 rounded-lg">
                        <i class="fas fa-redo mr-2"></i> Try Again
                    </button>
                </div>
            `;
            
            // Hide loading screen
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 2000);
        }

        // Make functions available globally
        window.toggleEndpoint = toggleEndpoint;
        window.executeRequest = executeRequest;
        window.clearResponse = clearResponse;
        window.copyUrl = copyUrl;
        window.copyResponse = copyResponse;
        window.updateRequestUrl = updateRequestUrl;
        window.loadOfflineMode = loadOfflineMode;
    </script>
</body>
</html>